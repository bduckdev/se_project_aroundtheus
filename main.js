!function(){"use strict";const e=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],t=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal"),s=(document.querySelector("#profile-name"),document.querySelector("#profile-description"),document.querySelector("#profile-name-input")),o=document.querySelector("#profile-description-input"),n=document.querySelector(".profile__add-button"),a=document.querySelector("#add-card-modal"),i=(document.querySelector("#add-card-title-input"),document.querySelector("#add-card-image-input"),document.querySelector("#view-image-modal"),document.querySelector("#image-modal-text"),document.querySelector("#image-modal-image"),document.querySelectorAll(".modal"),document.querySelectorAll("form"),document.querySelector(".gallery__container"),document.querySelector(".profile__avatar")),l=(document.querySelector("#avatar"),document.querySelector("#avatar-edit-modal")),c=document.querySelector("#delete-image-modal");class d{constructor(e,t,r,s,o){let{name:n,link:a,_id:i,isLiked:l}=e;this._name=n,this._link=a,this._id=i,this.isLiked=l,this._cardSelector=t,this._handleImageClick=r,this._handleDeleteButton=s,this._handleLikeButton=o}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton(this)})),this.cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}removeCard(){this._cardEl.remove(),this._cardEl=null}_checkLiked(){this.isLiked&&this._toggleLikedClass()}_toggleLikedClass(){this._likeButton.classList.toggle("card__button_active")}likeCard(){this._toggleLikedClass(),this.isLiked=!this.isLiked}getView(){return this._cardEl=document.querySelector(this._cardSelector).content.cloneNode(!0).querySelector(".card"),this._id,this.cardImageEl=this._cardEl.querySelector("#card-image"),this.cardTitleEl=this._cardEl.querySelector("#card-title"),this._likeButton=this._cardEl.querySelector("#card-button"),this._deleteButton=this._cardEl.querySelector("#card-delete"),this.cardTitleEl.innerText=this._name,this.cardImageEl.src=this._link,this.cardImageEl.alt=this._name,this._checkLiked(),this._setEventListeners(),this._cardEl}}class h{constructor(e,t){this._config=e,this._targetForm=t}_showInputError(e){const t=this._targetForm.querySelector(`#${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._targetForm.querySelector(`#${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(e,t){let r=!1;e.forEach((e=>{e.validity.valid||(r=!0)})),r?this.disableSubmitButton():(t.classList.remove(this._config.inactiveButtonClass),t.disabled=!1)}_setEventListeners(){const e=this._config.inputSelector,t=[...this._targetForm.querySelectorAll(e)],r=this._targetForm.querySelector(this._config.submitButtonSelector);this._toggleButtonState(t,r),t.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(t,r)}))}))}enableValidation(){this._targetForm.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._targetForm)}disableSubmitButton(){const e=this._targetForm.querySelector(this._config.submitButtonSelector);e.classList.add(this._config.inactiveButtonClass),e.disabled=!0}}class u{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleCloseClick=e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalElement.addEventListener("click",this._handleCloseClick)}}class m extends u{constructor(e){let{modalSelector:t,handleFormSubmit:r}=e;super({modalSelector:t}),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=r}_getInputValues(){const e=[...this._modalForm.querySelectorAll(".modal__input")],t={};return e.forEach((e=>{const r=e.name,s=e.value;t[r]=s})),t}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{const t=this._getInputValues();this._handleFormSubmit(e,t)})),super.setEventListeners()}close(){this._modalForm.reset(),super.close()}}const _=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserData(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._headers.authorization}}).then((e=>this._checkResponse(e)))}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkResponse(e)))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkResponse(e)))}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers,body:JSON.stringify({_id:e})}).then((e=>this._checkResponse(e)))}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({_id:e})}).then((e=>this._checkResponse(e)))}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers,body:JSON.stringify({_id:e})}).then((e=>this._checkResponse(e)))}initialLoad(){const e=this.getUserData(),t=this.getInitialCards();return Promise.all([e,t]).then((e=>e))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1/",headers:{authorization:"32a0da8c-2dd8-41c5-9cc6-63c733b86137","Content-Type":"application/json"}}),p=new m({modalSelector:"#profile-edit-modal",handleFormSubmit:function(e,t){e.preventDefault(),r.querySelector(".modal__button").innerText="Saving...";const s=t.Name,o=t.Description;return _.updateProfileInfo(s,o).then((()=>{y.setUserInfo(s,o),q["profile-edit-form"].disableSubmitButton()})).then((()=>{p.close()})).finally((()=>{r.querySelector(".modal__button").innerText="Save"})).catch((e=>{console.error(e)}))}}),S=new m({modalSelector:"#avatar-edit-modal",handleFormSubmit:function(e,t){e.preventDefault(),l.querySelector(".modal__button").innerText="Saving...";const r=t.Avatar;return _.updateAvatar(r).then((()=>{y.setAvatar(r)})).then((()=>{q["avatar-form"].disableSubmitButton(),S.close()})).finally((()=>{l.querySelector(".modal__button").innerText="Save"})).catch((e=>{console.error(e)}))}}),g=new m({modalSelector:"#add-card-modal",handleFormSubmit:function(e,t){e.preventDefault(),a.querySelector(".modal__button").innerText="Saving...";const r=t.Title,s=t["Image Link"];return _.addCard({name:r,link:s}).then((e=>e)).then((e=>{const t=L(e);w.addItem(t),q["add-card-form"].disableSubmitButton(),S.close()})).then((()=>{g.close()})).finally((()=>{a.querySelector(".modal__button").innerText="Save"})).catch((e=>{console.error(e)}))}}),v=new class extends u{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._image=document.querySelector("#image-modal-image"),this._caption=document.querySelector("#image-modal-text")}open(e){this._image.src=e.cardImageEl.src,this._image.alt=e.cardImageEl.alt,this._caption.textContent=e.cardTitleEl.textContent,super.open()}}({modalSelector:"#view-image-modal"}),f=new class extends u{constructor(e,t){let{modalSelector:r,cardRemovalHandler:s}=e;super({modalSelector:r}),this._deleteButton=document.getElementById("delete-image-confirm"),this._cardRemovalHandler=s,this.card=t}open(e){super.open(),this._deleteButton.innerText="Yes",this.card=e}_handleCardRemoval=()=>{this._cardRemovalHandler(this.card)};setEventListeners(){this._deleteButton.addEventListener("click",this._handleCardRemoval),super.setEventListeners()}close(){this.card=void 0,super.close()}}({modalSelector:"#delete-image-modal",cardRemovalHandler:function(e){return c.querySelector(".modal__button").innerText="Saving...",_.deleteCard(e._id).then((()=>{e.removeCard()})).then((()=>{f.close()})).finally((()=>{c.querySelector(".modal__button").innerText="Yes"})).catch((e=>{console.error(e)}))},card:void 0}),y=new class{constructor(e){let{nameSelector:t,descriptionSelector:r,avatarSelector:s}=e;this.nameEl=document.querySelector(t),this.descriptionEl=document.querySelector(r),this.avatarEl=document.querySelector(s)}getUserInfo(){return{name:this.nameEl.innerText,description:this.descriptionEl.innerText}}setUserInfo(e,t){this.nameEl.textContent=e,this.descriptionEl.textContent=t}setAvatar(e){this.avatarEl.src=e}}({nameSelector:"#profile-name",descriptionSelector:"#profile-description",avatarSelector:"#avatar"});function E(e){f.card=e,f.open(e)}function k(e){return e.isLiked?_.unlikeCard(e._id).then((()=>{e.likeCard()})).catch((e=>{console.error(e)})):_.likeCard(e._id).then((()=>{e.likeCard()})).catch((e=>{console.error(e)}))}function b(e){v.open(e)}function L(e){let{name:t,link:r,_id:s,isLiked:o}=e;return new d({name:t,link:r,_id:s,isLiked:o},"#card-template",b,E,k).getView()}t.addEventListener("click",(()=>{p.open();const e=y.getUserInfo();s.value=e.name,o.value=e.description})),n.addEventListener("click",(()=>{g.open()})),i.addEventListener("click",(()=>{S.open()}));const q={};var C;C={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(C.formSelector)).forEach((e=>{const t=new h(C,e),r=e.getAttribute("name");q[r]=t,t.enableValidation()})),g.setEventListeners(),p.setEventListeners(),v.setEventListeners(),S.setEventListeners(),f.setEventListeners();const w=new class{constructor(e,t){let{items:r,renderer:s}=e;this.items=r,this.renderer=s,this.selector=t}addItem(e){document.querySelector(this.selector).prepend(e)}renderItems(){this.items.forEach((e=>{const t=this.renderer(e);this.addItem(t)}))}}({items:[],renderer:L},"#gallery-container");_.initialLoad().then((e=>(function(e){let{name:t,about:r,avatar:s}=e;y.setUserInfo(t,r),y.setAvatar(s)}(e[0]),e))).then((t=>{var r;return 0!=(r=t[1]).length?(w.items=r,w.renderItems()):(console.log("Gallery empty. Loading default cards..."),w.items=function(){const t=[];return e.forEach((e=>{_.addCard(e).finally((e=>{t.push(e)})).catch((e=>{console.error(e)}))})),t}(),w.renderItems()),t})).catch((e=>{console.error(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0IsR0FDdkIsc0JBN0RBcEQsRUFDR2dDLGNBQ0FqQixNQUFNcUIsSUFQWCxTQUEwQlIsR0FBMEIsSUFBekIsS0FBRXBJLEVBQUksTUFBRThILEVBQUssT0FBRUcsR0FBUUcsRUFDaERXLEVBQVVDLFlBQVloSixFQUFNOEgsR0FDNUJpQixFQUFVUyxVQUFVdkIsRUFDdEIsQ0FLTTZELENBQWtCbEQsRUFBSyxJQUNoQkEsS0FFUnJCLE1BQU1xQixJQVFYLElBQTBCbUQsRUFOcEIsT0FPbUIsSUFEQ0EsRUFQSG5ELEVBQUssSUFRYm9ELFFBQ1huQyxFQUFlLE1BQUlrQyxFQUNuQmxDLEVBQVErQixnQkFFUnZDLFFBQVE0QyxJQUFJLDJDQUNacEMsRUFBZSxNQUluQixXQUNFLE1BQU1xQyxFQUFlLEdBV3JCLE9BVkFwRCxFQUFBQSxTQUE2QlksSUFDM0JsRCxFQUNHMkIsUUFBUXVCLEdBQ1JSLFNBQVNRLElBQ1J3QyxFQUFhQyxLQUFLekMsRUFBSyxJQUV4QlAsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHQUNsQixJQUVDOEMsQ0FDVCxDQWpCdUJFLEdBQ25CdkMsRUFBUStCLGVBYkNoRCxDQUFJLElBRVpPLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksRyIsInNvdXJjZXMiOlsid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbERlbGV0ZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdG9yQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIEVMRU1FTlRTXG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIsXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWxEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtaW1hZ2UtaW5wdXRcIik7XG5cbmV4cG9ydCBjb25zdCBpbWFnZU1vZGFsRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2aWV3LWltYWdlLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGltYWdlTW9kYWxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC10ZXh0XCIpO1xuZXhwb3J0IGNvbnN0IGltYWdlTW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtaW1hZ2VcIik7XG5cbmV4cG9ydCBjb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuXG5leHBvcnQgY29uc3QgZm9ybUVscyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZm9ybVwiKV07XG5cbmV4cG9ydCBjb25zdCBnYWxsZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jb250YWluZXJcIik7XG5cbmV4cG9ydCBjb25zdCBhdmF0YXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhclwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdC1tb2RhbFwiKTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZU1vZGFsRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtaW1hZ2UtbW9kYWxcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVCdXR0b24sXG4gICAgaGFuZGxlTGlrZUJ1dHRvbixcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uID0gaGFuZGxlRGVsZXRlQnV0dG9uO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWwucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsID0gbnVsbDtcbiAgfVxuICBfY2hlY2tMaWtlZCgpIHtcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XG4gICAgICB0aGlzLl90b2dnbGVMaWtlZENsYXNzKCk7XG4gICAgfVxuICB9XG4gIF90b2dnbGVMaWtlZENsYXNzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbl9hY3RpdmVcIik7XG4gIH1cbiAgbGlrZUNhcmQoKSB7XG4gICAgdGhpcy5fdG9nZ2xlTGlrZWRDbGFzcygpO1xuICAgIHRoaXMuaXNMaWtlZCA9ICF0aGlzLmlzTGlrZWQ7XG4gIH1cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWwgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuICAgIHRoaXMuX2lkO1xuICAgIHRoaXMuY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xuICAgIHRoaXMuY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWRlbGV0ZVwiKTtcbiAgICB0aGlzLmNhcmRUaXRsZUVsLmlubmVyVGV4dCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jaGVja0xpa2VkKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCB0YXJnZXRGb3JtKSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX3RhcmdldEZvcm0gPSB0YXJnZXRGb3JtO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl90YXJnZXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgLFxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl90YXJnZXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgLFxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzLCBzdWJtaXRCdXR0b24pIHtcbiAgICBsZXQgZm91bmRJbnZhbGlkID0gZmFsc2U7XG4gICAgaW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvL2Rpc2FibGUgYW5kIGVuYWJsZSB0aGUgc3VibWl0IGJ1dHRvblxuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBpbnB1dFNlbGVjdG9yID0gdGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgY29uc3QgaW5wdXRFbHMgPSBbLi4udGhpcy5fdGFyZ2V0Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl90YXJnZXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVscywgc3VibWl0QnV0dG9uKTtcblxuICAgIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVscywgc3VibWl0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdGFyZ2V0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fdGFyZ2V0Rm9ybSk7XG4gIH1cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl90YXJnZXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgKTtcbiAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVDbG9zZUNsaWNrID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsb3NlQ2xpY2spO1xuICB9XG59XG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoRm9ybSBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fbW9kYWxGb3JtID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IF9tb2RhbElucHV0cyA9IFsuLi50aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIildO1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgX21vZGFsSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBpbnB1dC5uYW1lO1xuICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICAgIGlucHV0VmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZSwgaW5wdXRWYWx1ZXMpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBjb25zdHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBNb2RhbERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbERlbGV0ZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG4vLyBBUElcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL1wiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIzMmEwZGE4Yy0yZGQ4LTQxYzUtOWNjNi02M2M3MzNiODYxMzdcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuLy8gbW9kYWxzXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oe1xuICBtb2RhbFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG59KTtcblxuY29uc3QgYXZhdGFyRWRpdE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oe1xuICBtb2RhbFNlbGVjdG9yOiBcIiNhdmF0YXItZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiBoYW5kbGVBdmF0YXJFZGl0U3VibWl0LFxufSk7XG5cbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKHtcbiAgbW9kYWxTZWxlY3RvcjogXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlQWRkQ2FyZFN1Ym1pdCxcbn0pO1xuXG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IE1vZGFsV2l0aEltYWdlKHtcbiAgbW9kYWxTZWxlY3RvcjogXCIjdmlldy1pbWFnZS1tb2RhbFwiLFxufSk7XG5cbmNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IE1vZGFsRGVsZXRlKHtcbiAgbW9kYWxTZWxlY3RvcjogXCIjZGVsZXRlLWltYWdlLW1vZGFsXCIsXG4gIGNhcmRSZW1vdmFsSGFuZGxlcjogaGFuZGxlQ2FyZFJlbW92YWwsXG4gIGNhcmQ6IHVuZGVmaW5lZCxcbn0pO1xuXG4vLyBwcm9maWxlIHNlY3Rpb25cblxuY29uc3QgcHJvZmlsZUVsID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLW5hbWVcIixcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxuICBhdmF0YXJTZWxlY3RvcjogXCIjYXZhdGFyXCIsXG59KTtcblxuLy8gc3VibWlzc2lvbiBoYW5kbGVyc1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChlLCBpbnB1dFZhbHVlcykge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0cy5wcm9maWxlRWRpdERpdi5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIikuaW5uZXJUZXh0ID0gXCJTYXZpbmcuLi5cIjtcbiAgY29uc3QgbmFtZSA9IGlucHV0VmFsdWVzW1wiTmFtZVwiXTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBpbnB1dFZhbHVlc1tcIkRlc2NyaXB0aW9uXCJdO1xuICByZXR1cm4gYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHByb2ZpbGVFbC5zZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbik7XG4gICAgICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHByb2ZpbGVFZGl0TW9kYWwuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNvbnN0cy5wcm9maWxlRWRpdERpdi5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIikuaW5uZXJUZXh0ID0gXCJTYXZlXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRWRpdFN1Ym1pdChlLCBpbnB1dFZhbHVlcykge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0cy5hdmF0YXJFZGl0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKS5pbm5lclRleHQgPSBcIlNhdmluZy4uLlwiO1xuICBjb25zdCBhdmF0YXIgPSBpbnB1dFZhbHVlc1tcIkF2YXRhclwiXTtcbiAgcmV0dXJuIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoYXZhdGFyKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHByb2ZpbGVFbC5zZXRBdmF0YXIoYXZhdGFyKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGZvcm1WYWxpZGF0b3JzW1wiYXZhdGFyLWZvcm1cIl0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgICAgYXZhdGFyRWRpdE1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjb25zdHMuYXZhdGFyRWRpdERpdi5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIikuaW5uZXJUZXh0ID0gXCJTYXZlXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlLCBpbnB1dFZhbHVlcykge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0cy5hZGRDYXJkTW9kYWxEaXYucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpLmlubmVyVGV4dCA9XG4gICAgXCJTYXZpbmcuLi5cIjtcbiAgY29uc3QgbmFtZSA9IGlucHV0VmFsdWVzW1wiVGl0bGVcIl07XG4gIGNvbnN0IGxpbmsgPSBpbnB1dFZhbHVlc1tcIkltYWdlIExpbmtcIl07XG4gIHJldHVybiBhcGlcbiAgICAuYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSlcbiAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgfSlcbiAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsID0gY3JlYXRlQ2FyZChjYXJkKTtcbiAgICAgIGdhbGxlcnkuYWRkSXRlbShjYXJkRWwpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtY2FyZC1mb3JtXCJdLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIGF2YXRhckVkaXRNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjb25zdHMuYWRkQ2FyZE1vZGFsRGl2LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKS5pbm5lclRleHQgPSBcIlNhdmVcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdXR0b24oY2FyZCkge1xuICBkZWxldGVNb2RhbFtcImNhcmRcIl0gPSBjYXJkO1xuICBkZWxldGVNb2RhbC5vcGVuKGNhcmQpO1xufVxuZnVuY3Rpb24gaGFuZGxlQ2FyZFJlbW92YWwoY2FyZCkge1xuICBjb25zdHMuZGVsZXRlTW9kYWxEaXYucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpLmlubmVyVGV4dCA9IFwiU2F2aW5nLi4uXCI7XG4gIHJldHVybiBhcGlcbiAgICAuZGVsZXRlQ2FyZChjYXJkLl9pZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGRlbGV0ZU1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjb25zdHMuZGVsZXRlTW9kYWxEaXYucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpLmlubmVyVGV4dCA9IFwiWWVzXCI7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuLy8gY2FyZCBoYW5kbGVyc1xuZnVuY3Rpb24gaGFuZGxlTGlrZUJ1dHRvbihjYXJkKSB7XG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XG4gICAgcmV0dXJuIGFwaVxuICAgICAgLmxpa2VDYXJkKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmxpa2VDYXJkKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwaVxuICAgICAgLnVubGlrZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQubGlrZUNhcmQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkKSB7XG4gIGltYWdlTW9kYWwub3BlbihjYXJkKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSkge1xuICBjb25zdCBjYXJkRWwgPSBuZXcgQ2FyZChcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbixcbiAgICBoYW5kbGVMaWtlQnV0dG9uLFxuICApO1xuICByZXR1cm4gY2FyZEVsLmdldFZpZXcoKTtcbn1cbi8vIGV2ZW50IGxpc3RlbmVyc1xuXG5jb25zdHMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZUVkaXRNb2RhbC5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gcHJvZmlsZUVsLmdldFVzZXJJbmZvKCk7XG4gIGNvbnN0cy5wcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGFbXCJuYW1lXCJdO1xuICBjb25zdHMucHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YVtcImRlc2NyaXB0aW9uXCJdO1xufSk7XG5cbmNvbnN0cy5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XG59KTtcbmNvbnN0cy5hdmF0YXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vLyBpbml0aWFsIGxvYWRpbmcgaGFuZGxlcnNcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUxvYWQoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgcHJvZmlsZUVsLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0KTtcbiAgcHJvZmlsZUVsLnNldEF2YXRhcihhdmF0YXIpO1xufVxuZnVuY3Rpb24gbG9hZEFsbCgpIHtcbiAgYXBpXG4gICAgLmluaXRpYWxMb2FkKClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgaGFuZGxlUHJvZmlsZUxvYWQoZGF0YVswXSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsb2FkRGVmYXVsdENhcmRzKGRhdGFbMV0pO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gbG9hZERlZmF1bHRDYXJkcyhjYXJkc0Fycikge1xuICBpZiAoY2FyZHNBcnIubGVuZ3RoICE9IDApIHtcbiAgICBnYWxsZXJ5W1wiaXRlbXNcIl0gPSBjYXJkc0FycjtcbiAgICBnYWxsZXJ5LnJlbmRlckl0ZW1zKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCJHYWxsZXJ5IGVtcHR5LiBMb2FkaW5nIGRlZmF1bHQgY2FyZHMuLi5cIik7XG4gICAgZ2FsbGVyeVtcIml0ZW1zXCJdID0gYWRkRGVmYXVsdENhcmRzKCk7XG4gICAgZ2FsbGVyeS5yZW5kZXJJdGVtcygpO1xuICB9XG59XG5mdW5jdGlvbiBhZGREZWZhdWx0Q2FyZHMoKSB7XG4gIGNvbnN0IGRlZmF1bHRDYXJkcyA9IFtdO1xuICBjb25zdHMuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICBhcGlcbiAgICAgIC5hZGRDYXJkKGNhcmQpXG4gICAgICAuZmluYWxseSgoY2FyZCkgPT4ge1xuICAgICAgICBkZWZhdWx0Q2FyZHMucHVzaChjYXJkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBkZWZhdWx0Q2FyZHM7XG59XG5cbi8vIHZhbGlkYXRpb25cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsKTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5lbmFibGVWYWxpZGF0aW9uKGNvbnN0cy52YWxpZGF0b3JDb25maWcpO1xuLy8gb24gcGFnZSBsb2FkXG5cbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZUVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBnYWxsZXJ5ID0gbmV3IFNlY3Rpb24oXG4gIHsgaXRlbXM6IFtdLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxuICBcIiNnYWxsZXJ5LWNvbnRhaW5lclwiLFxuKTtcbmxvYWRBbGwoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG4gIHVwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogZGVzY3JpcHRpb24sXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbiAgdXBkYXRlQXZhdGFyKGltZykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogaW1nLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgX2lkOiBjYXJkSWQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIF9pZDogY2FyZElkLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG4gIHVubGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIF9pZDogY2FyZElkLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG4gIGluaXRpYWxMb2FkKCkge1xuICAgIGNvbnN0IGdldERhdGEgPSB0aGlzLmdldFVzZXJEYXRhKCk7XG4gICAgY29uc3QgZ2V0Q2FyZHMgPSB0aGlzLmdldEluaXRpYWxDYXJkcygpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbZ2V0RGF0YSwgZ2V0Q2FyZHNdKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEltYWdlIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtaW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtdGV4dFwiKTtcbiAgfVxuICBvcGVuKGNhcmQpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBjYXJkLmNhcmRJbWFnZUVsLnNyYztcblxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGNhcmQuY2FyZEltYWdlRWwuYWx0O1xuXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmQuY2FyZFRpdGxlRWwudGV4dENvbnRlbnQ7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbERlbGV0ZSBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yLCBjYXJkUmVtb3ZhbEhhbmRsZXIgfSwgY2FyZCkge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZS1pbWFnZS1jb25maXJtXCIpO1xuICAgIHRoaXMuX2NhcmRSZW1vdmFsSGFuZGxlciA9IGNhcmRSZW1vdmFsSGFuZGxlcjtcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICB9XG4gIG9wZW4oY2FyZCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uaW5uZXJUZXh0ID0gXCJZZXNcIjtcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICB9XG4gIF9oYW5kbGVDYXJkUmVtb3ZhbCA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkUmVtb3ZhbEhhbmRsZXIodGhpcy5jYXJkKTtcbiAgfTtcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkUmVtb3ZhbCk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLmNhcmQgPSB1bmRlZmluZWQ7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMubmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5hdmF0YXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lRWwuaW5uZXJUZXh0LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb25FbC5pbm5lclRleHQsXG4gICAgfTtcbiAgICByZXR1cm4gdXNlckRhdGE7XG4gIH1cbiAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgICB0aGlzLm5hbWVFbC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbiAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuYXZhdGFyRWwuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgfVxuICBhZGRJdGVtKGVsKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yKS5wcmVwZW5kKGVsKTtcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuYWRkSXRlbShlbCk7XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJpbml0aWFsQ2FyZHMiLCJuYW1lIiwibGluayIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVkaXREaXYiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlQWRkQnV0dG9uIiwiYWRkQ2FyZE1vZGFsRGl2IiwiYXZhdGFyQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsImF2YXRhckVkaXREaXYiLCJkZWxldGVNb2RhbERpdiIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbiIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJjYXJkSW1hZ2VFbCIsInJlbW92ZUNhcmQiLCJfY2FyZEVsIiwicmVtb3ZlIiwiX2NoZWNrTGlrZWQiLCJfdG9nZ2xlTGlrZWRDbGFzcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxpa2VDYXJkIiwiZ2V0VmlldyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGVFbCIsImlubmVyVGV4dCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJ0YXJnZXRGb3JtIiwiX2NvbmZpZyIsIl90YXJnZXRGb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbHMiLCJzdWJtaXRCdXR0b24iLCJmb3VuZEludmFsaWQiLCJmb3JFYWNoIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJNb2RhbCIsIm1vZGFsU2VsZWN0b3IiLCJfbW9kYWxFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbG9zZUNsaWNrIiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIk1vZGFsV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfbW9kYWxJbnB1dHMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJEYXRhIiwiZmV0Y2giLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInVwZGF0ZVByb2ZpbGVJbmZvIiwiZGVzY3JpcHRpb24iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwidXBkYXRlQXZhdGFyIiwiaW1nIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWRkQ2FyZCIsIl9yZWYyIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsInVubGlrZUNhcmQiLCJpbml0aWFsTG9hZCIsImdldERhdGEiLCJnZXRDYXJkcyIsImFsbCIsImRhdGEiLCJwcm9maWxlRWRpdE1vZGFsIiwiY29uc3RzIiwicHJvZmlsZUVsIiwic2V0VXNlckluZm8iLCJmb3JtVmFsaWRhdG9ycyIsImZpbmFsbHkiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImF2YXRhckVkaXRNb2RhbCIsInNldEF2YXRhciIsImFkZENhcmRNb2RhbCIsImNhcmQiLCJjYXJkRWwiLCJjcmVhdGVDYXJkIiwiZ2FsbGVyeSIsImFkZEl0ZW0iLCJpbWFnZU1vZGFsIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJkZWxldGVNb2RhbCIsImNhcmRSZW1vdmFsSGFuZGxlciIsImdldEVsZW1lbnRCeUlkIiwiX2NhcmRSZW1vdmFsSGFuZGxlciIsIl9oYW5kbGVDYXJkUmVtb3ZhbCIsInVuZGVmaW5lZCIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIm5hbWVFbCIsImRlc2NyaXB0aW9uRWwiLCJhdmF0YXJFbCIsImdldFVzZXJJbmZvIiwicHJvZmlsZURhdGEiLCJmb3JtU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJmb3JtRWwiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsImVsIiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImhhbmRsZVByb2ZpbGVMb2FkIiwiY2FyZHNBcnIiLCJsZW5ndGgiLCJsb2ciLCJkZWZhdWx0Q2FyZHMiLCJwdXNoIiwiYWRkRGVmYXVsdENhcmRzIl0sInNvdXJjZVJvb3QiOiIifQ==